---
phase: 04-coach-workout-logging
plan: 08
type: execute
wave: 5
depends_on: ["04-07"]
files_modified:
  - apps/coach-web/src/routes/_authenticated/$orgSlug/logging/index.tsx
  - apps/coach-web/src/features/workout-logs/views/logging-dashboard-view.tsx
  - apps/coach-web/src/features/workout-logs/components/pending-workouts-table.tsx
autonomous: true

must_haves:
  truths:
    - "Logging dashboard shows pending workouts grouped by athlete"
    - "Each pending workout links to session logging page"
    - "Dashboard accessible from sidebar navigation"
  artifacts:
    - path: "apps/coach-web/src/routes/_authenticated/$orgSlug/logging/index.tsx"
      provides: "Logging dashboard route"
      min_lines: 20
    - path: "apps/coach-web/src/features/workout-logs/views/logging-dashboard-view.tsx"
      provides: "Dashboard view component"
      exports: ["LoggingDashboardView"]
    - path: "apps/coach-web/src/features/workout-logs/components/pending-workouts-table.tsx"
      provides: "Pending workouts table"
      exports: ["PendingWorkoutsTable"]
  key_links:
    - from: "apps/coach-web/src/features/workout-logs/views/logging-dashboard-view.tsx"
      to: "usePendingWorkouts hook"
      via: "data fetching"
      pattern: "usePendingWorkouts"
---

<objective>
Create the logging dashboard that shows pending workouts for all athletes.

Purpose: Entry point for coaches to see which workouts need logging. Groups pending sessions by athlete and provides quick navigation to log each session.

Output: Logging dashboard route with pending workouts table, integrated with sidebar navigation.
</objective>

<execution_context>
@/Users/tomiardz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tomiardz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04-coach-workout-logging/04-CONTEXT.md

# From prior plans
@apps/coach-web/src/features/workout-logs/hooks/queries/use-pending-workouts.ts

# Reference: Existing page patterns
@apps/coach-web/src/routes/_authenticated/$orgSlug/athletes/index.tsx
@apps/coach-web/src/components/layout/sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Logging Dashboard Route and View</name>
  <files>
    apps/coach-web/src/routes/_authenticated/$orgSlug/logging/index.tsx
    apps/coach-web/src/features/workout-logs/views/logging-dashboard-view.tsx
  </files>
  <action>
**index.tsx (route):**
```typescript
import { createFileRoute } from '@tanstack/react-router'
import { LoggingDashboardView } from '@/features/workout-logs/views/logging-dashboard-view'

export const Route = createFileRoute('/_authenticated/$orgSlug/logging/')({
  component: LoggingDashboardPage,
})

function LoggingDashboardPage() {
  return <LoggingDashboardView />
}
```

**logging-dashboard-view.tsx:**
```typescript
import { usePendingWorkouts } from '../hooks/queries/use-pending-workouts'
import { PendingWorkoutsTable } from '../components/pending-workouts-table'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Skeleton } from '@/components/ui/skeleton'
import { ClipboardList } from 'lucide-react'

export function LoggingDashboardView() {
  const { data, isLoading, error } = usePendingWorkouts()

  return (
    <div className="space-y-6">
      {/* Header */}
      <div>
        <h1 className="text-2xl font-bold tracking-tight">Registro de Entrenamientos</h1>
        <p className="text-muted-foreground">
          Entrenamientos pendientes de registrar
        </p>
      </div>

      {/* Pending workouts card */}
      <Card>
        <CardHeader>
          <CardTitle className="flex items-center gap-2">
            <ClipboardList className="h-5 w-5" />
            Entrenamientos Pendientes
          </CardTitle>
          <CardDescription>
            Sesiones que no tienen registro completado
          </CardDescription>
        </CardHeader>
        <CardContent>
          {isLoading ? (
            <div className="space-y-3">
              <Skeleton className="h-10 w-full" />
              <Skeleton className="h-10 w-full" />
              <Skeleton className="h-10 w-full" />
            </div>
          ) : error ? (
            <div className="text-center py-8 text-muted-foreground">
              Error al cargar entrenamientos pendientes
            </div>
          ) : data && data.items.length > 0 ? (
            <PendingWorkoutsTable items={data.items} />
          ) : (
            <div className="text-center py-8 text-muted-foreground">
              <ClipboardList className="h-12 w-12 mx-auto mb-4 opacity-50" />
              <p>No hay entrenamientos pendientes</p>
              <p className="text-sm">
                Todos los atletas tienen sus sesiones al dia
              </p>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  )
}
```
  </action>
  <verify>
    Route file exists and exports Route
    View component renders
  </verify>
  <done>
    Logging dashboard route at /logging
    View shows pending workouts with loading and empty states
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Pending Workouts Table</name>
  <files>apps/coach-web/src/features/workout-logs/components/pending-workouts-table.tsx</files>
  <action>
Create a table component for pending workouts:

```typescript
import { Link, useParams } from '@tanstack/react-router'
import type { z } from 'zod'
import type { pendingWorkoutSchema } from '@strenly/contracts/workout-logs/list-logs'
import { Button } from '@/components/ui/button'
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table'
import { Play } from 'lucide-react'

type PendingWorkout = z.infer<typeof pendingWorkoutSchema>

interface PendingWorkoutsTableProps {
  items: PendingWorkout[]
}

export function PendingWorkoutsTable({ items }: PendingWorkoutsTableProps) {
  const { orgSlug } = useParams({ from: '/_authenticated/$orgSlug' })

  // Group by athlete for better UX
  const groupedByAthlete = items.reduce(
    (acc, item) => {
      if (!acc[item.athleteId]) {
        acc[item.athleteId] = {
          athleteId: item.athleteId,
          athleteName: item.athleteName,
          workouts: [],
        }
      }
      acc[item.athleteId].workouts.push(item)
      return acc
    },
    {} as Record<string, { athleteId: string; athleteName: string; workouts: PendingWorkout[] }>
  )

  const athletes = Object.values(groupedByAthlete)

  return (
    <div className="space-y-6">
      {athletes.map((athlete) => (
        <div key={athlete.athleteId}>
          {/* Athlete header */}
          <div className="flex items-center gap-2 mb-2">
            <h3 className="font-semibold">{athlete.athleteName}</h3>
            <span className="text-sm text-muted-foreground">
              ({athlete.workouts.length} pendientes)
            </span>
          </div>

          {/* Workouts table */}
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead>Programa</TableHead>
                <TableHead>Semana</TableHead>
                <TableHead>Sesion</TableHead>
                <TableHead className="w-[100px]"></TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {athlete.workouts.map((workout) => (
                <TableRow key={`${workout.sessionId}-${workout.weekId}`}>
                  <TableCell>{workout.programName}</TableCell>
                  <TableCell>{workout.weekName}</TableCell>
                  <TableCell>{workout.sessionName}</TableCell>
                  <TableCell>
                    <Button asChild size="sm">
                      <Link
                        to="/$orgSlug/athletes/$athleteId/log/$sessionId"
                        params={{
                          orgSlug,
                          athleteId: workout.athleteId,
                          sessionId: workout.sessionId,
                        }}
                        search={{
                          programId: workout.programId,
                          weekId: workout.weekId,
                        }}
                      >
                        <Play className="h-4 w-4 mr-1" />
                        Registrar
                      </Link>
                    </Button>
                  </TableCell>
                </TableRow>
              ))}
            </TableBody>
          </Table>
        </div>
      ))}
    </div>
  )
}
```

Key features:
- Groups workouts by athlete for easier scanning
- Shows program, week, and session names
- "Registrar" button links to session logging page
- Passes programId and weekId as search params
  </action>
  <verify>
    Component exports PendingWorkoutsTable
    `pnpm typecheck` passes
  </verify>
  <done>
    Table groups pending workouts by athlete
    Each row links to session logging page
  </done>
</task>

<task type="auto">
  <name>Task 3: Add Logging to Sidebar Navigation</name>
  <files>apps/coach-web/src/components/layout/sidebar.tsx</files>
  <action>
Add a "Registro" navigation item to the sidebar:

1. Import ClipboardList icon from lucide-react
2. Add new nav item in the main navigation section:
   ```typescript
   {
     title: 'Registro',
     href: `/${orgSlug}/logging`,
     icon: ClipboardList,
   }
   ```
3. Place it after "Programas" and before any settings/tools section

The sidebar should now show:
- Dashboard
- Atletas
- Programas
- Ejercicios
- **Registro** (new)
  </action>
  <verify>
    Sidebar shows "Registro" nav item
    Link navigates to /[orgSlug]/logging
  </verify>
  <done>
    Sidebar includes Registro navigation
    Logging dashboard accessible from main nav
  </done>
</task>

</tasks>

<verification>
```bash
# TypeScript compiles
pnpm typecheck

# Start dev and manually verify
pnpm dev:coach
# Navigate to /[orgSlug]/logging
```
</verification>

<success_criteria>
1. Logging dashboard route exists at /$orgSlug/logging
2. Dashboard shows pending workouts grouped by athlete
3. Each workout row has "Registrar" button linking to logging page
4. Empty state shows when no pending workouts
5. "Registro" nav item added to sidebar
</success_criteria>

<output>
After completion, create `.planning/phases/04-coach-workout-logging/04-08-SUMMARY.md`
</output>
