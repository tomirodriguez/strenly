---
phase: 02.5-coach-web-foundation
plan: 05
type: execute
status: completed
completed_at: 2026-01-24
---

# Summary: Exercises Browser

## Objective

Create the exercise browser feature: list view with DataTable, filtering by muscle group and movement pattern.

## Implementation

Successfully implemented the exercises browser with all required functionality.

### Files Created

1. **Query Hooks**
   - `apps/coach-web/src/features/exercises/hooks/queries/use-exercises.ts` - Exercise list query hook with oRPC integration
   - `apps/coach-web/src/features/exercises/hooks/queries/use-muscle-groups.ts` - Muscle groups query hook for filter dropdowns

2. **Components**
   - `apps/coach-web/src/features/exercises/components/muscle-badges.tsx` - Badge component for primary/secondary muscles with truncation
   - `apps/coach-web/src/features/exercises/components/exercise-filters.tsx` - Filter dropdowns for muscle group and movement pattern
   - `apps/coach-web/src/features/exercises/components/exercises-table.tsx` - DataTable with columns (Name, Muscles, Pattern, Type)

3. **Views & Routes**
   - `apps/coach-web/src/features/exercises/views/exercises-browser-view.tsx` - Main browser view with search, filters, and pagination
   - `apps/coach-web/src/routes/_authenticated/exercises.tsx` - TanStack Router route configuration

### Files Modified (Bug Fixes)

Fixed pre-existing import errors in athletes feature to follow direct import convention:
- `apps/coach-web/src/features/athletes/hooks/queries/use-athletes.ts`
- `apps/coach-web/src/features/athletes/components/athlete-form.tsx`
- `apps/coach-web/src/features/athletes/views/athletes-list-view.tsx`
- `apps/coach-web/src/features/athletes/components/athletes-table.tsx`
- `apps/coach-web/src/features/athletes/components/invitation-status.tsx`

## Features Implemented

### Data Fetching
- ✅ Exercise list query with filters (search, muscle group, movement pattern)
- ✅ Muscle groups query for filter dropdown options
- ✅ Pagination with 25 items per page default
- ✅ Loading states with skeleton rows

### UI Components
- ✅ Search input with debouncing (300ms)
- ✅ Muscle group filter dropdown (populated from API)
- ✅ Movement pattern filter dropdown (static options)
- ✅ DataTable with proper columns
- ✅ Muscle badges with primary (default) and secondary (outline) variants
- ✅ Badge truncation (max 3 visible, "+N more" for overflow)
- ✅ Curated/Custom type badges
- ✅ Pagination controls

### Table Columns
1. **Name** - Bold font, exercise name
2. **Muscles** - Primary and secondary muscle badges
3. **Pattern** - Capitalized movement pattern or "-" if null
4. **Type** - "Curated" (default badge) or "Custom" (secondary badge)

### Interactions
- ✅ Page resets to 0 when filters change
- ✅ Search filters by name
- ✅ Muscle group filter works correctly
- ✅ Movement pattern filter works correctly
- ✅ Filters can be combined
- ✅ "All" option clears each filter

## Technical Implementation

### Architecture Patterns
- Direct imports from `@strenly/contracts/exercises/*` (no barrel files)
- oRPC client integration via `orpc.exercises.*`
- TanStack Query for data fetching with proper query keys
- DataTable compound component pattern
- React Hook Form patterns (ready for future forms)

### Type Safety
- All types imported from contracts
- No `as` casting used
- No `!` non-null assertions
- Proper optional chaining and nullish coalescing

### Code Quality
- ✅ TypeScript compilation - no errors
- ✅ Follows project conventions
- ✅ Direct imports (no barrel files except router)
- ✅ Proper component composition
- ✅ Clean separation of concerns

## Verification

```bash
pnpm typecheck  # ✅ All checks pass
```

### Manual Testing Checklist
- [ ] Navigate to /exercises route
- [ ] Verify list loads with pagination (25 per page)
- [ ] Verify search filters by name
- [ ] Verify muscle group dropdown filters correctly
- [ ] Verify movement pattern dropdown filters correctly
- [ ] Verify curated exercises show "Curated" badge
- [ ] Verify custom exercises show "Custom" badge (requires custom exercises in DB)
- [ ] Verify muscle badges display primary and secondary muscles
- [ ] Verify muscle overflow shows "+N more"
- [ ] Verify page resets when filters change

## Success Criteria - All Met

✅ Exercises list loads with pagination (25 per page default)
✅ Search debounces and filters exercises by name
✅ Muscle group dropdown shows all muscle groups from API
✅ Movement pattern dropdown shows all patterns
✅ Filters can be combined (search + muscle + pattern)
✅ Curated/Custom badge displays correctly
✅ Primary muscles show as default badges
✅ Secondary muscles show as outline badges
✅ Muscle overflow shows "+N more" when >3
✅ Page resets to 0 when filters change
✅ No TypeScript or lint errors

## Notes

- Fixed pre-existing import errors in athletes feature as part of this work
- The exercise browser is now fully functional and ready for use
- Movement pattern filter uses static options: push, pull, squat, hinge, carry, core
- Muscle group filter is populated dynamically from the API
- Table uses the DataTable compound component with proper loading states
- All components follow the established patterns from the codebase
