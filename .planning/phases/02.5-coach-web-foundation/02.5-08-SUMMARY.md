---
phase: 02.5-coach-web-foundation
plan: 08
subsystem: ui
tags: [dropdown-menu, data-table, base-ui, react-context, compound-component]

# Dependency graph
requires:
  - phase: 02.5-coach-web-foundation
    provides: UI components, DataTable compound component, DropdownMenu primitives
provides:
  - Working user menu dropdown without MenuGroupRootContext error
  - Working exercises table with DataTable context properly composed
  - DataTable compound component pattern guidance
affects: [dashboard, settings, athletes-table]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "DropdownMenuLabel must be wrapped in DropdownMenuGroup for Base UI"
    - "DataTable.Content and DataTablePagination must be children of DataTable.Root"
    - "Use children prop for DataTable wrapper components to maintain context"

key-files:
  created: []
  modified:
    - apps/coach-web/src/components/layout/user-menu.tsx
    - apps/coach-web/src/features/exercises/components/exercises-table.tsx
    - apps/coach-web/src/features/exercises/views/exercises-browser-view.tsx

key-decisions:
  - "Wrap user info label in DropdownMenuGroup for Base UI context requirement"
  - "Add children prop to ExercisesTable for composable DataTable pattern"
  - "Render DataTablePagination as child of ExercisesTable to stay in context"

patterns-established:
  - "DropdownMenuLabel requires DropdownMenuGroup wrapper when using Base UI Menu primitives"
  - "DataTable compound components must be descendants of DataTable.Root for context access"

# Metrics
duration: 2min
completed: 2026-01-24
---

# Phase 02.5 Plan 08: UI Crash Fixes Summary

**Fixed MenuGroupRootContext error in user menu and DataTable.Root context error in exercises table by correcting component composition**

## Performance

- **Duration:** 2 min
- **Started:** 2026-01-24T14:52:35Z
- **Completed:** 2026-01-24T14:54:08Z
- **Tasks:** 2
- **Files modified:** 3

## Accomplishments
- User menu dropdown now opens without MenuGroupRootContext error
- Exercises page renders table and pagination without DataTable context errors
- Theme toggle and logout options accessible in user menu
- Pagination works correctly in exercises browser

## Task Commits

Each task was committed atomically:

1. **Task 1: Fix user menu DropdownMenuGroup wrapper** - `988e877` (fix)
2. **Task 2: Fix DataTable compound component pattern in exercises** - `1865166` (fix)

## Files Created/Modified
- `apps/coach-web/src/components/layout/user-menu.tsx` - Wrapped DropdownMenuLabel in DropdownMenuGroup
- `apps/coach-web/src/features/exercises/components/exercises-table.tsx` - Added children prop, rendered DataTable.Content inside Root
- `apps/coach-web/src/features/exercises/views/exercises-browser-view.tsx` - Passed DataTablePagination as child of ExercisesTable

## Decisions Made
- **DropdownMenuLabel wrapper pattern:** DropdownMenuLabel wraps Base UI's MenuPrimitive.GroupLabel which requires MenuGroupRootContext only provided by MenuPrimitive.Group (DropdownMenuGroup). Every label must be inside a group.
- **DataTable children composition:** Instead of refactoring the entire exercises view, modified ExercisesTable to accept children prop and render them inside DataTable.Root context. This allows DataTablePagination to be passed as a child while maintaining context access.

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
None - both fixes were straightforward component composition corrections.

## Next Phase Readiness
- User menu fully functional with theme toggle and logout
- Exercises browser page renders correctly with table and pagination
- Tests 2 (login/logout), 4 (exercises page), 5 (theme toggle), 11 (exercises browser), 13 (logout) unblocked
- Ready for verification testing

---
*Phase: 02.5-coach-web-foundation*
*Completed: 2026-01-24*
