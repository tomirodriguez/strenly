# Phase 3.3 Plan 04: Sessions Count in Create Program Summary

## One-liner

Add sessionsCount field (1-7, default 3) to create program form in compact grid layout with weeks.

## What Was Built

### Contract Changes
- Added `sessionsCount` field to `createProgramInputSchema` in `/packages/contracts/src/programs/program.ts`
- Field is optional with range 1-7, Spanish error messages
- Updated JSDoc to document the new property

### Form Changes
- Added `showSessionsCount` prop to `ProgramForm` component (default true)
- Added `sessionsCount` to defaultValues (default 3)
- Created compact 2-column grid layout for weeks and sessions fields
- Shortened field descriptions for compactness: "1-12 semanas", "1-7 dias/semana"

### Use Case Changes
- Added `sessionsCount` to `CreateProgramInput` type in `/packages/backend/src/use-cases/programs/create-program.ts`
- Modified session creation to iterate `sessionsCount` times (default 3)
- Sessions named "Dia 1", "Dia 2", etc. (Spanish)
- Uses same sequential creation pattern as weeks

## Key Files

| File | Purpose |
|------|---------|
| `packages/contracts/src/programs/program.ts` | Contract schema with sessionsCount validation |
| `apps/coach-web/src/features/programs/components/program-form.tsx` | Form with compact grid layout |
| `packages/backend/src/use-cases/programs/create-program.ts` | Use case creating multiple sessions |

## Commits

| Hash | Message |
|------|---------|
| 695e88a | feat(03.3-04): add sessionsCount to createProgramInputSchema |
| d7a108e | feat(03.3-04): add sessionsCount field to ProgramForm |
| 621ffb1 | feat(03.3-04): create multiple sessions based on sessionsCount |
| aa5910a | fix(03.3-04): fix unused imports and props in exercise-row-actions |

## Deviations from Plan

### Auto-fixed Issues

**1. [Rule 3 - Blocking] Fixed unused imports and props in exercise-row-actions.tsx**
- **Found during:** Verification (typecheck)
- **Issue:** Pre-existing typecheck errors: unused imports (Link2Icon, Link2OffIcon, PlusIcon, useMemo, useUpdateExerciseRow) and `supersetGroup` prop not destructured
- **Fix:** Removed unused imports, destructured missing props with underscore prefix
- **Files modified:** `apps/coach-web/src/components/programs/exercise-row-actions.tsx`
- **Commit:** aa5910a

**2. [Rule 3 - Blocking] Fixed formatting in grid-store.ts**
- **Found during:** Lint check
- **Issue:** Pre-existing formatting issue (multiline filter callback)
- **Fix:** Applied Biome auto-fix
- **Files modified:** `apps/coach-web/src/stores/grid-store.ts`
- **Commit:** aa5910a (included in same commit)

## Verification Results

- `pnpm typecheck`: All packages pass
- `pnpm lint`: All packages pass
- Contract schema includes sessionsCount (1-7, optional)
- Form shows sessionsCount field in compact grid layout
- Use case creates specified number of sessions

## Duration

~4 minutes
