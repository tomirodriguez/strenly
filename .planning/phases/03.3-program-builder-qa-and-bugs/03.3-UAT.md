---
status: complete
phase: 03.3-program-builder-qa-and-bugs
source: 03.3-01-SUMMARY.md, 03.3-02-SUMMARY.md, 03.3-03-SUMMARY.md, 03.3-04-SUMMARY.md
started: 2026-01-26T14:30:00Z
updated: 2026-01-26T18:30:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Edit Mode Triggers - Digit Keys
expected: Press digit (0-9) on selected cell enters edit mode with digit as first char, cursor at end
result: pass

### 2. Edit Mode Triggers - Enter/F2
expected: Press Enter or F2 on selected cell enters edit mode with existing content, cursor at end (not all text selected)
result: pass

### 3. Edit Mode Triggers - Other Keys Ignored
expected: Press letter keys (a-z) on selected cell does NOT enter edit mode - cell stays selected but not editable
result: pass

### 4. Arrow Keys in Edit Mode - Cursor Movement
expected: While editing a cell with text (cursor NOT at boundary), left/right arrow keys move cursor within the input text
result: pass

### 5. Arrow Keys at Boundaries - Focus Sync
expected: When navigating from boundary (e.g., cursor at end, press right), edit mode exits, UI shows next cell as focused, and pressing Enter enters edit mode on that NEW cell (not the old one)
result: issue
reported: "Focus state doesn't sync with visual. After boundary navigation, UI shows new cell focused but Enter triggers edit mode on the OLD cell. Internal focus reference not updated."
severity: major

### 6. Add Exercise - Local State
expected: Click "+ Agregar ejercicio" row, select an exercise from combobox. The exercise appears immediately in the grid without page refresh. The save button shows unsaved changes.
result: pass
note: Minor feedback - combobox has no debounce

### 7. Superset Menu - Create New Group
expected: Open row actions menu (three dots) on an exercise row. Submenu "Superserie" shows option to create new superset with next available letter. Uses client-side state (no backend call until save).
result: issue
reported: "Completely broken - ALL exercises now show A1. Group letter should be based on session's exerciseGroups array (A=group 0, B=group 1). Number should be position within group's exercises array (1=first, 2=second). Adding exercise to group B should make it B3 if group already has 2 exercises."
severity: blocker

### 8. Superset Menu - Join Existing Group
expected: When other superset groups exist in the same session, the Superserie submenu shows options like "Agregar a superserie [A]" to join existing groups
result: skipped
reason: Test 7 blocker - group labeling broken, can't create valid groups to join

### 9. Create Program Form - Sessions Count
expected: When creating a new program, the form shows a "Sesiones por semana" field (1-7) alongside weeks field in a compact layout. Default value is 3.
result: pass

### 10. Create Program - Sessions Created
expected: Create a program with sessionsCount=4. The grid shows 4 sessions (Dia 1, Dia 2, Dia 3, Dia 4) for each week.
result: pass

## Summary

total: 10
passed: 6
issues: 2
pending: 0
skipped: 2

## Gaps

- truth: "After boundary navigation, internal focus state matches visual indicator so Enter triggers edit on the NEW focused cell"
  status: failed
  reason: "User reported: Focus state doesn't sync with visual. After boundary navigation (cursor at end, press right), UI shows new cell focused but Enter triggers edit mode on the OLD cell."
  severity: major
  test: 5
  root_cause: ""
  artifacts:
    - path: "apps/coach-web/src/components/programs/program-grid/prescription-cell.tsx"
      issue: "Boundary navigation updates visual but doesn't update internal activeCell reference"
  missing:
    - "Ensure boundary navigation in prescription-cell.tsx calls the grid navigation handler to update activeCell state"
  debug_session: ""

- truth: "Exercise rows show correct group letter (A/B/C based on group index) and position number (1/2/3 based on position in group)"
  status: failed
  reason: "User reported: ALL exercises show A1. Broken labeling. Expected: Letter = group index in session, Number = position within group's exercises array."
  severity: blocker
  test: 7
  root_cause: ""
  artifacts: []
  missing:
    - "Fix group/position calculation: Letter from exerciseGroup index in session, Number from exercise position in group"
    - "Ensure updateSupersetGroup properly assigns exercises to groups"
  debug_session: ""
