---
phase: 02-exercise-library-athlete-management
plan: 11
type: execute
wave: 5
depends_on: ["02-01", "02-10"]
files_modified:
  - packages/database/src/seed/muscle-groups.ts
  - packages/database/src/seed/exercises.ts
  - packages/database/src/seed/index.ts
autonomous: true

must_haves:
  truths:
    - "All 10 muscle groups seeded with display names and body regions"
    - "50-100 curated exercises seeded with muscle mappings"
    - "Curated exercises have isCurated=true and null organizationId"
    - "Seed script is idempotent (safe to run multiple times)"
  artifacts:
    - path: "packages/database/src/seed/muscle-groups.ts"
      provides: "Muscle group seed data"
      exports: ["seedMuscleGroups"]
    - path: "packages/database/src/seed/exercises.ts"
      provides: "Curated exercise seed data"
      exports: ["seedExercises"]
  key_links:
    - from: "packages/database/src/seed/exercises.ts"
      to: "packages/database/src/schema/exercises.ts"
      via: "inserts into exercises table"
      pattern: "insert.*exercises"
---

<objective>
Seed the database with muscle groups and curated exercises.

Purpose: Provide initial exercise library data for coaches to use.
Output: Idempotent seed scripts with 10 muscle groups and 50-100 exercises.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-exercise-library-athlete-management/02-CONTEXT.md
@.planning/phases/02-exercise-library-athlete-management/02-RESEARCH.md
@packages/database/src/schema/muscle-groups.ts
@packages/database/src/schema/exercises.ts
@packages/database/src/schema/exercise-muscles.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Muscle Groups Seed</name>
  <files>packages/database/src/seed/muscle-groups.ts</files>
  <action>
Create muscle-groups.ts seed script:

export const MUSCLE_GROUPS_DATA = [
  { id: "mg-chest", name: "chest", displayName: "Chest", bodyRegion: "upper" },
  { id: "mg-back", name: "back", displayName: "Back", bodyRegion: "upper" },
  { id: "mg-shoulders", name: "shoulders", displayName: "Shoulders", bodyRegion: "upper" },
  { id: "mg-biceps", name: "biceps", displayName: "Biceps", bodyRegion: "upper" },
  { id: "mg-triceps", name: "triceps", displayName: "Triceps", bodyRegion: "upper" },
  { id: "mg-quads", name: "quads", displayName: "Quadriceps", bodyRegion: "lower" },
  { id: "mg-hamstrings", name: "hamstrings", displayName: "Hamstrings", bodyRegion: "lower" },
  { id: "mg-glutes", name: "glutes", displayName: "Glutes", bodyRegion: "lower" },
  { id: "mg-core", name: "core", displayName: "Core", bodyRegion: "core" },
  { id: "mg-calves", name: "calves", displayName: "Calves", bodyRegion: "lower" },
];

export async function seedMuscleGroups(db: DbClient) {
  // Upsert pattern for idempotency
  for (const mg of MUSCLE_GROUPS_DATA) {
    await db
      .insert(muscleGroups)
      .values(mg)
      .onConflictDoNothing({ target: muscleGroups.id });
  }
  console.log(`Seeded ${MUSCLE_GROUPS_DATA.length} muscle groups`);
}
  </action>
  <verify>pnpm typecheck --filter @strenly/database</verify>
  <done>Muscle groups seed with all 10 groups created</done>
</task>

<task type="auto">
  <name>Task 2: Create Exercises Seed</name>
  <files>packages/database/src/seed/exercises.ts</files>
  <action>
Create exercises.ts seed script with 50-100 common strength training exercises:

Organize by movement pattern, include primary/secondary muscle mappings.

Example structure:
const EXERCISES_DATA = [
  // PUSH exercises
  {
    id: "ex-bench-press",
    name: "Barbell Bench Press",
    description: "Horizontal pressing movement for chest development",
    movementPattern: "push",
    isUnilateral: false,
    isCurated: true,
    primaryMuscles: ["chest"],
    secondaryMuscles: ["triceps", "shoulders"],
  },
  {
    id: "ex-incline-bench",
    name: "Incline Barbell Bench Press",
    description: "Upper chest focused pressing movement",
    movementPattern: "push",
    isUnilateral: false,
    isCurated: true,
    primaryMuscles: ["chest"],
    secondaryMuscles: ["triceps", "shoulders"],
  },
  // ... more push exercises

  // PULL exercises
  {
    id: "ex-barbell-row",
    name: "Barbell Row",
    description: "Horizontal pulling for back thickness",
    movementPattern: "pull",
    isUnilateral: false,
    isCurated: true,
    primaryMuscles: ["back"],
    secondaryMuscles: ["biceps"],
  },
  // ... more pull exercises

  // SQUAT exercises
  {
    id: "ex-back-squat",
    name: "Back Squat",
    description: "Fundamental lower body compound movement",
    movementPattern: "squat",
    isUnilateral: false,
    isCurated: true,
    primaryMuscles: ["quads", "glutes"],
    secondaryMuscles: ["hamstrings", "core"],
  },
  // ... more squat exercises

  // HINGE exercises
  {
    id: "ex-deadlift",
    name: "Conventional Deadlift",
    description: "Hip hinge movement for posterior chain",
    movementPattern: "hinge",
    isUnilateral: false,
    isCurated: true,
    primaryMuscles: ["hamstrings", "glutes", "back"],
    secondaryMuscles: ["core"],
  },
  // ... more hinge exercises

  // CORE exercises
  {
    id: "ex-plank",
    name: "Plank",
    description: "Isometric core stabilization",
    movementPattern: "core",
    isUnilateral: false,
    isCurated: true,
    primaryMuscles: ["core"],
    secondaryMuscles: [],
  },
  // ... more core exercises

  // CARRY exercises
  {
    id: "ex-farmers-walk",
    name: "Farmer's Walk",
    description: "Loaded carry for grip and core",
    movementPattern: "carry",
    isUnilateral: false,
    isCurated: true,
    primaryMuscles: ["core"],
    secondaryMuscles: ["shoulders", "back"],
  },
];

Include at least:
- 15 push exercises (bench variations, OHP, dips, pushups)
- 15 pull exercises (rows, pullups, face pulls, curls)
- 10 squat exercises (squat variations, lunges, leg press)
- 10 hinge exercises (deadlift variations, RDL, hip thrusts)
- 5 core exercises (planks, ab wheel, pallof press)
- 5 carry exercises (farmer's walk, suitcase carry)

export async function seedExercises(db: DbClient) {
  for (const ex of EXERCISES_DATA) {
    // Insert exercise
    await db.insert(exercises).values({
      id: ex.id,
      organizationId: null, // curated = null
      name: ex.name,
      description: ex.description,
      movementPattern: ex.movementPattern,
      isUnilateral: ex.isUnilateral,
      isCurated: true,
    }).onConflictDoNothing({ target: exercises.id });

    // Insert muscle mappings
    for (const mg of ex.primaryMuscles) {
      await db.insert(exerciseMuscles).values({
        exerciseId: ex.id,
        muscleGroupId: `mg-${mg}`,
        isPrimary: true,
      }).onConflictDoNothing();
    }
    for (const mg of ex.secondaryMuscles) {
      await db.insert(exerciseMuscles).values({
        exerciseId: ex.id,
        muscleGroupId: `mg-${mg}`,
        isPrimary: false,
      }).onConflictDoNothing();
    }
  }
  console.log(`Seeded ${EXERCISES_DATA.length} exercises`);
}
  </action>
  <verify>pnpm typecheck --filter @strenly/database</verify>
  <done>50-100 curated exercises seeded with muscle mappings</done>
</task>

<task type="auto">
  <name>Task 3: Update Seed Index and Run</name>
  <files>packages/database/src/seed/index.ts</files>
  <action>
Create or update packages/database/src/seed/index.ts:

import { seedMuscleGroups } from "./muscle-groups";
import { seedExercises } from "./exercises";
// ... existing seeds (plans, etc.)

export async function seed(db: DbClient) {
  console.log("Starting database seed...");

  // Seed in order (muscle groups before exercises)
  await seedMuscleGroups(db);
  await seedExercises(db);
  // ... existing seeds

  console.log("Database seed complete!");
}

Run the seed:
pnpm db:seed

If DATABASE_URL not set, note that seed is ready to run.
  </action>
  <verify>pnpm typecheck --filter @strenly/database && (pnpm db:seed || echo "Seed ready, requires DATABASE_URL")</verify>
  <done>Seed script updated and executed (or ready to execute)</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck --filter @strenly/database` passes
2. Seed script runs without errors (if DATABASE_URL set)
3. 10 muscle groups created
4. 50+ exercises created with muscle mappings
5. All seeded exercises have isCurated=true and null organizationId
</verification>

<success_criteria>
- All 10 muscle groups seeded: chest, back, shoulders, biceps, triceps, quads, hamstrings, glutes, core, calves
- 50-100 common exercises seeded covering all 6 movement patterns
- Each exercise has appropriate primary and secondary muscle mappings
- Seed is idempotent (uses onConflictDoNothing)
- Curated exercises are globally visible (no organizationId)
</success_criteria>

<output>
After completion, create `.planning/phases/02-exercise-library-athlete-management/02-11-SUMMARY.md`
</output>
