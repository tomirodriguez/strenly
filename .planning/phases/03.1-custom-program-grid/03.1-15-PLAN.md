---
phase: 03.1-custom-program-grid
plan: 15
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/coach-web/src/components/programs/program-grid/exercise-row-prefix.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Non-superset rows display numeric labels (1, 2, 3) not letter labels (A1, B1)"
    - "Superset rows continue using letter-based labels (A1, A2, B1, B2)"
    - "No visual collision between superset and non-superset labels"
  artifacts:
    - path: "apps/coach-web/src/components/programs/program-grid/exercise-row-prefix.tsx"
      provides: "Row prefix with distinct labeling systems"
      contains: "position + 1"
  key_links:
    - from: "exercise-row-prefix.tsx"
      to: "row.supersetGroup"
      via: "conditional label generation"
      pattern: "row\\.supersetGroup \\? .* : .*position"
---

<objective>
Fix superset label collision by using numbers for non-superset rows instead of letters.

Purpose: Currently both superset rows and non-superset rows use the same letter namespace (A, B, C). This causes visual duplicates when a superset exists - for example, both a non-superset first row and the first superset row display "A1". Users see duplicate labels which is confusing.

Output: Non-superset rows display "1", "2", "3" while superset rows display "A1", "A2", "B1", "B2".
</objective>

<execution_context>
@/Users/tomiardz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tomiardz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/03.1-custom-program-grid/03.1-UAT-v3.md
@apps/coach-web/src/components/programs/program-grid/exercise-row-prefix.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Change non-superset row labels from letters to numbers</name>
  <files>apps/coach-web/src/components/programs/program-grid/exercise-row-prefix.tsx</files>
  <action>
Modify the getLabel() function in exercise-row-prefix.tsx to use numbers for non-superset rows.

Current logic (lines 23-32):
```tsx
const getLabel = (): string => {
  if (row.supersetGroup) {
    return `${row.supersetGroup}${row.supersetOrder ?? ''}`
  }

  // For non-superset rows, show letter based on exercise position
  const position = row.exercise?.position ?? 0
  const letter = POSITION_LETTERS[position] ?? 'A'
  return `${letter}1`
}
```

New logic - use simple numbers for non-superset rows:
```tsx
const getLabel = (): string => {
  if (row.supersetGroup) {
    return `${row.supersetGroup}${row.supersetOrder ?? ''}`
  }

  // For non-superset rows, show position number (1-based)
  const position = row.exercise?.position ?? 0
  return String(position + 1)
}
```

Also remove the unused POSITION_LETTERS constant at line 10 since it's no longer needed.

Result:
- Superset rows: A1, A2, B1, B2 (unchanged)
- Non-superset rows: 1, 2, 3, 4 (changed from A1, B1, C1, D1)
  </action>
  <verify>
1. Run `pnpm typecheck` - should pass
2. Run `pnpm lint` - should pass
3. Manual: Open program editor with exercises. Non-superset rows should show "1", "2", "3"
4. Manual: Create a superset (A1, A2). The superset shows letters, other rows show numbers. No duplicates.
  </verify>
  <done>
Non-superset rows display numeric labels (1, 2, 3). Superset rows display letter-based labels (A1, A2). No visual collision between the two labeling systems.
  </done>
</task>

</tasks>

<verification>
- `pnpm typecheck` passes
- `pnpm lint` passes (no unused POSITION_LETTERS constant)
- Non-superset rows show "1", "2", "3" etc.
- Superset rows show "A1", "A2", "B1", "B2" etc.
- Adding exercise to superset does not create duplicate labels
</verification>

<success_criteria>
- POSITION_LETTERS constant removed from exercise-row-prefix.tsx
- getLabel() returns number string for non-superset rows
- getLabel() returns letter+number string for superset rows
- No label collisions between superset and non-superset rows
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-custom-program-grid/03.1-15-SUMMARY.md`
</output>
