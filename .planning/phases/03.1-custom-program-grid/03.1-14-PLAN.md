---
phase: 03.1-custom-program-grid
plan: 14
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/coach-web/src/features/programs/components/program-form.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Athlete selector dropdown shows only athletes, no 'Sin atleta asignado' option"
    - "User can clear selection via X button (showClear)"
    - "Empty state message only appears when search yields no results"
  artifacts:
    - path: "apps/coach-web/src/features/programs/components/program-form.tsx"
      provides: "Program form with clean athlete selector"
      contains: "showClear={!!field.value}"
  key_links:
    - from: "ComboboxInput"
      to: "field.value"
      via: "showClear prop"
      pattern: "showClear=\\{!!field\\.value\\}"
---

<objective>
Remove the unnecessary 'Sin atleta asignado' option from the athlete selector dropdown.

Purpose: The athlete selector already has an X button (showClear) to clear the selection. Having a separate list option is redundant and clutters the dropdown. Users reported this as confusing UX.

Output: Clean athlete selector that shows only actual athletes in the dropdown list.
</objective>

<execution_context>
@/Users/tomiardz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tomiardz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/03.1-custom-program-grid/03.1-UAT-v3.md
@apps/coach-web/src/features/programs/components/program-form.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove 'Sin atleta asignado' option from athlete selector</name>
  <files>apps/coach-web/src/features/programs/components/program-form.tsx</files>
  <action>
Remove lines 144-147 from program-form.tsx. These lines contain:

```tsx
{/* Clear selection option */}
<ComboboxItem value="" className="text-muted-foreground">
  Sin atleta asignado
</ComboboxItem>
```

The X button (via `showClear={!!field.value}` on ComboboxInput) already provides the ability to clear the selection. The `handleSelect` function at lines 116-130 already handles the empty value case correctly when the X is clicked.

Do NOT modify:
- The handleSelect function - it correctly handles value === '' || value === null
- The showClear prop - it enables the X button when an athlete is selected
- The ComboboxEmpty component - it shows "No se encontraron atletas" when no matches found
  </action>
  <verify>
1. Run `pnpm typecheck` - should pass
2. Run `pnpm lint` - should pass
3. Manual: Open create program form, click athlete dropdown - only actual athletes should appear in list, no "Sin atleta asignado" option
4. Manual: Select an athlete, X button appears, click X to clear - field clears properly
  </verify>
  <done>
Athlete selector dropdown shows only actual athletes. Clear selection functionality works via X button. No redundant "Sin atleta asignado" option in dropdown list.
  </done>
</task>

</tasks>

<verification>
- `pnpm typecheck` passes
- `pnpm lint` passes
- Athlete selector shows only athlete names in dropdown
- X button clears selection when athlete is selected
</verification>

<success_criteria>
- Lines 144-147 (the ComboboxItem with empty value) removed from program-form.tsx
- Form still functions correctly (can select athlete, can clear selection)
- No TypeScript or lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/03.1-custom-program-grid/03.1-14-SUMMARY.md`
</output>
