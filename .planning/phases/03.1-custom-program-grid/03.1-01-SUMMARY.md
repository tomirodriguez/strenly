---
phase: "03.1"
plan: "01"
subsystem: "coach-web"
tags: ["DataTable", "programs", "pagination", "tanstack-table"]
dependencies:
  requires: ["03-10"]
  provides: ["Programs DataTable view", "Paginated programs list"]
  affects: ["03.1-02"]
tech-stack:
  added: []
  patterns: ["DataTable compound component", "Callback memoization"]
key-files:
  created:
    - "apps/coach-web/src/features/programs/components/programs-table-columns.tsx"
    - "apps/coach-web/src/features/programs/components/programs-table.tsx"
  modified:
    - "apps/coach-web/src/features/programs/views/programs-list-view.tsx"
  deleted:
    - "apps/coach-web/src/features/programs/components/program-card.tsx"
decisions: []
metrics:
  duration: "3 min"
  completed: "2026-01-25"
---

# Phase 3.1 Plan 01: Programs List DataTable Summary

**One-liner:** Replaced programs card grid with DataTable for scalable list view with pagination and row actions.

## What Was Built

### Task 1: Programs Table Columns (56a87e8)
Created column definitions for the programs table following the athletes-table-columns pattern:
- **ProgramRow type**: Extended Program with athleteName and weeksCount
- **Columns**: name (font-medium), status (badge), athleteName, weeksCount, isTemplate (badge/text), updatedAt (relative date with Spanish locale)
- **Row actions**: Edit, Duplicate, Archive (destructive, hidden when archived)
- **Pattern**: createProgramsColumns factory function accepting callbacks

### Task 2: ProgramsTable Component (93bacf8)
Created ProgramsTable component using DataTable compound component:
- Accepts data, pagination state, loading state, and action callbacks
- Uses DataTable.Root with DataTable.Content and DataTablePagination children
- Memoizes columns creation for stable references

### Task 3: Programs List View Update (fa6a32c)
Refactored ProgramsListView to use DataTable instead of card grid:
- Added pagination state (pageIndex, pageSize default 20)
- Updated usePrograms hook call with limit/offset calculation
- Reset pagination to page 0 on filter changes (search, status, templates)
- Maps programs to ProgramRow with athleteName resolution
- Used useCallback for stable action handlers
- Removed unused program-card.tsx component

## Files Changed

| File | Action | Lines |
|------|--------|-------|
| `apps/coach-web/src/features/programs/components/programs-table-columns.tsx` | Created | 128 |
| `apps/coach-web/src/features/programs/components/programs-table.tsx` | Created | 52 |
| `apps/coach-web/src/features/programs/views/programs-list-view.tsx` | Modified | 220 |
| `apps/coach-web/src/features/programs/components/program-card.tsx` | Deleted | -129 |

## Technical Decisions

None - followed established DataTable pattern from athletes-table.

## Deviations from Plan

None - plan executed exactly as written.

## Verification Results

- [x] `pnpm typecheck` - passes
- [x] `pnpm lint` - no errors in new files (pre-existing errors in other files)
- [x] Column definitions export createProgramsColumns function
- [x] ProgramsTable renders DataTable with pagination

## Next Phase Readiness

**Phase 03.1-02** (Grid Column Definitions) can proceed. This plan provides the foundation for the programs list but is independent of the program editor grid work.
