---
phase: 03.1-custom-program-grid
plan: 15
subsystem: ui
tags: [react, grid, labeling, superset]

# Dependency graph
requires:
  - phase: 03.1-custom-program-grid
    provides: Custom program grid with superset indicators
provides:
  - Unified labeling system treating all exercises as groups
  - groupLetter and groupIndex properties on GridRow
  - Simplified exercise-row-prefix component
affects: [03-program-builder, future-grid-features]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Everything is a group - standalone = group of 1, superset = group of N"
    - "Unified display format: letter + number for all exercises"

key-files:
  created: []
  modified:
    - apps/coach-web/src/components/programs/program-grid/types.ts
    - apps/coach-web/src/components/programs/program-grid/transform-program.ts
    - apps/coach-web/src/components/programs/program-grid/exercise-row-prefix.tsx

key-decisions:
  - "Everything is a group model - eliminates conditional superset vs standalone logic"
  - "groupLetter and groupIndex calculated in transform, displayed uniformly"

patterns-established:
  - "Logical group calculation: supersets share letter with sequential indices, standalone gets unique letter with index 1"

# Metrics
duration: 3min
completed: 2026-01-25
---

# Phase 3.1 Plan 15: Unified Row Labeling Summary

**Simplified row labeling by treating all exercises as groups - standalone = group of 1 (A1, B1), superset = group of N (A1, A2, A3)**

## Performance

- **Duration:** 3 min
- **Started:** 2026-01-25T19:01:38Z
- **Completed:** 2026-01-25T19:04:12Z
- **Tasks:** 3
- **Files modified:** 3

## Accomplishments

- Added groupLetter and groupIndex properties to GridRow type for unified labeling
- Implemented logical group calculation in transform-program.ts treating all exercises as groups
- Simplified exercise-row-prefix to use single unified format (letter + number)
- Eliminated POSITION_LETTERS constant and conditional superset vs standalone logic

## Task Commits

Each task was committed atomically:

1. **Task 1: Add groupLetter and groupIndex to GridRow type** - `1d3b61c` (feat)
2. **Task 2: Calculate group assignments in transform-program.ts** - `a32e0a7` (feat)
3. **Task 3: Simplify exercise-row-prefix to use unified format** - `b0f6e83` (feat)

## Files Created/Modified

- `apps/coach-web/src/components/programs/program-grid/types.ts` - Added groupLetter?: string and groupIndex?: number to GridRow interface
- `apps/coach-web/src/components/programs/program-grid/transform-program.ts` - Added logical group calculation algorithm treating all exercises as groups
- `apps/coach-web/src/components/programs/program-grid/exercise-row-prefix.tsx` - Simplified to use unified format, removed POSITION_LETTERS

## Decisions Made

- **"Everything is a group" mental model** - Eliminates two-system complexity (superset vs standalone). A standalone exercise is just a group of 1.
- **groupLetter and groupIndex as optional properties** - Session-header and add-exercise rows don't need them, keeps type flexible

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None - implementation was straightforward.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- Unified labeling system complete
- Labels now follow logical sequence: A1, A2, A3 (superset) -> B1 (standalone) -> C1, C2 (superset) -> D1 (standalone)
- Ready for UAT v4 verification

---
*Phase: 03.1-custom-program-grid*
*Completed: 2026-01-25*
