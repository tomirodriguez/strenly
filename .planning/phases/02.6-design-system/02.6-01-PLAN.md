---
phase: 02.6-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/coach-web/src/index.css
  - apps/coach-web/src/lib/theme.tsx
autonomous: true

must_haves:
  truths:
    - "App background in dark mode is slate-950 (#0f172a)"
    - "Primary color is blue-600 (#2563eb) for buttons and focus rings"
    - "Dark mode is enabled by .dark class on html element"
  artifacts:
    - path: "apps/coach-web/src/index.css"
      provides: "CSS variables with slate palette and blue primary"
      contains: "oklch(0.129 0.042 264.695)"
    - path: "apps/coach-web/src/lib/theme.tsx"
      provides: "ThemeProvider using .dark class"
      contains: "classList.toggle"
  key_links:
    - from: "apps/coach-web/src/lib/theme.tsx"
      to: "document.documentElement"
      via: ".dark class toggle"
      pattern: "classList\\.toggle.*dark"
---

<objective>
Update CSS design tokens to slate color palette with blue primary accent.

Purpose: Transform the visual identity from neutral grays to a dark slate theme with blue accents, matching the reference design.
Output: Updated CSS variables and ThemeProvider that apply the new color scheme.
</objective>

<execution_context>
@/Users/tomiardz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tomiardz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02.6-design-system/02.6-RESEARCH.md
@docs/ux-ui/dashboard-look-and-feel.html
@apps/coach-web/src/index.css
@apps/coach-web/src/lib/theme.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update CSS Variables to Slate + Blue Palette</name>
  <files>apps/coach-web/src/index.css</files>
  <action>
Update the `.dark` section of CSS variables in index.css to use the slate color palette:

**Dark mode colors (replace existing .dark block):**
```css
.dark {
  /* Core surfaces */
  --background: oklch(0.129 0.042 264.695);      /* slate-950 #0f172a */
  --foreground: oklch(0.985 0 0);                 /* white */

  /* Cards and elevated surfaces */
  --card: oklch(0.208 0.042 265.755);            /* slate-900 #1e293b */
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.208 0.042 265.755);         /* slate-900 */
  --popover-foreground: oklch(0.985 0 0);

  /* Primary action color - blue */
  --primary: oklch(0.546 0.245 262.881);         /* blue-600 #2563eb */
  --primary-foreground: oklch(0.985 0 0);        /* white */

  /* Secondary/muted elements */
  --secondary: oklch(0.279 0.041 264.532);       /* slate-800 */
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.208 0.042 265.755);           /* slate-900 */
  --muted-foreground: oklch(0.554 0.046 257.417); /* slate-500 #94a3b8 */

  /* Accent for hover states */
  --accent: oklch(0.279 0.041 264.532);          /* slate-800 */
  --accent-foreground: oklch(0.985 0 0);

  /* Destructive - keep existing red */
  --destructive: oklch(0.704 0.191 22.216);

  /* Borders and inputs */
  --border: oklch(0.279 0.041 264.532);          /* slate-800 #334155 */
  --input: oklch(0.279 0.041 264.532);
  --ring: oklch(0.546 0.245 262.881);            /* blue-600 for focus */

  /* Charts - keep existing blues */
  --chart-1: oklch(0.809 0.105 251.813);
  --chart-2: oklch(0.623 0.214 259.815);
  --chart-3: oklch(0.546 0.245 262.881);
  --chart-4: oklch(0.488 0.243 264.376);
  --chart-5: oklch(0.424 0.199 265.638);

  /* Sidebar-specific */
  --sidebar: oklch(0.129 0.042 264.695);         /* slate-950 */
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.546 0.245 262.881); /* blue-600 */
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.279 0.041 264.532);  /* slate-800 */
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.279 0.041 264.532);  /* slate-800 */
  --sidebar-ring: oklch(0.546 0.245 262.881);
}
```

Keep the `:root` (light mode) variables unchanged for future flexibility.
Keep the `@theme inline` block unchanged as it references the CSS variables.
  </action>
  <verify>Run `pnpm typecheck` from project root - should pass (CSS only changes)</verify>
  <done>The .dark block in index.css contains slate-950 background (oklch(0.129 0.042 264.695)) and blue-600 primary (oklch(0.546 0.245 262.881))</done>
</task>

<task type="auto">
  <name>Task 2: Update ThemeProvider to Use .dark Class</name>
  <files>apps/coach-web/src/lib/theme.tsx</files>
  <action>
Update ThemeProvider to:
1. Use `.dark` class on `document.documentElement` instead of `data-theme` attribute
2. Default to 'dark' theme instead of 'system' for this app

**Changes to make:**

1. In the initial state, change default from 'system' to 'dark':
```typescript
const [theme, setThemeState] = useState<Theme>(() => {
  const stored = localStorage.getItem('theme')
  if (stored === 'light' || stored === 'dark' || stored === 'system') {
    return stored
  }
  return 'dark' // Changed from 'system'
})
```

2. In the first useEffect, replace `setAttribute('data-theme', resolved)` with `.dark` class toggle:
```typescript
useEffect(() => {
  const resolved = resolveTheme(theme)
  setResolvedTheme(resolved)
  // Use .dark class instead of data-theme attribute (shadcn/ui standard)
  document.documentElement.classList.toggle('dark', resolved === 'dark')
}, [theme])
```

3. In the second useEffect (system theme listener), replace the same:
```typescript
useEffect(() => {
  if (theme !== 'system') return

  const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')
  const handleChange = () => {
    const resolved = getSystemTheme()
    setResolvedTheme(resolved)
    document.documentElement.classList.toggle('dark', resolved === 'dark')
  }

  mediaQuery.addEventListener('change', handleChange)
  return () => mediaQuery.removeEventListener('change', handleChange)
}, [theme])
```
  </action>
  <verify>
1. Run `pnpm typecheck` - should pass
2. Start dev server `pnpm dev:coach` and verify:
   - App loads with dark theme (slate-950 background)
   - Inspect html element has `class="dark"`
  </verify>
  <done>ThemeProvider uses classList.toggle('dark', ...) instead of data-theme attribute, and defaults to 'dark' theme</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. App loads with dark slate background (#0f172a)
3. HTML element has `class="dark"` when in dark mode
4. Primary buttons appear in blue (#2563eb)
</verification>

<success_criteria>
- CSS variables in .dark block updated to slate palette
- Primary color is blue-600 for buttons, focus rings
- ThemeProvider uses .dark class
- App defaults to dark theme
</success_criteria>

<output>
After completion, create `.planning/phases/02.6-design-system/02.6-01-SUMMARY.md`
</output>
