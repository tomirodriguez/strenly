---
phase: 02.6-design-system
plan: 03
type: execute
wave: 2
depends_on: ["02.6-01", "02.6-02"]
files_modified:
  - apps/coach-web/src/components/ui/sidebar.tsx
  - apps/coach-web/src/components/layout/app-sidebar.tsx
autonomous: true

must_haves:
  truths:
    - "Active nav item has blue-600 background (sidebar-primary)"
    - "Inactive nav items have hover state with slate-800 background"
    - "Active nav item text is white with medium font weight"
  artifacts:
    - path: "apps/coach-web/src/components/ui/sidebar.tsx"
      provides: "Sidebar menu button with primary color for active state"
      contains: "data-active:bg-sidebar-primary"
    - path: "apps/coach-web/src/components/layout/app-sidebar.tsx"
      provides: "Nav items with correct active state styling"
      contains: "isActive"
  key_links:
    - from: "apps/coach-web/src/components/ui/sidebar.tsx"
      to: "CSS variables"
      via: "data-active:bg-sidebar-primary class"
      pattern: "data-active:bg-sidebar-primary"
---

<objective>
Update sidebar active nav styling to use primary color (blue-600) for active items.

Purpose: Make active navigation items visually prominent with blue background, matching the reference design's solid blue active state.
Output: Sidebar menu buttons with blue-600 background when active, proper hover states for inactive items.
</objective>

<execution_context>
@/Users/tomiardz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tomiardz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02.6-design-system/02.6-RESEARCH.md
@docs/ux-ui/dashboard-look-and-feel.html
@apps/coach-web/src/components/ui/sidebar.tsx
@apps/coach-web/src/components/layout/app-sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update SidebarMenuButton Active State Styling</name>
  <files>apps/coach-web/src/components/ui/sidebar.tsx</files>
  <action>
Update the `sidebarMenuButtonVariants` cva definition to use `sidebar-primary` for active state instead of `sidebar-accent`.

**Current active state classes (around line 444):**
```
data-active:bg-sidebar-accent data-active:text-sidebar-accent-foreground
```

**Change to:**
```
data-active:bg-sidebar-primary data-active:text-sidebar-primary-foreground
```

**Full update to sidebarMenuButtonVariants base classes:**
Replace the `data-active:` classes in the base string:
```typescript
const sidebarMenuButtonVariants = cva(
  'ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground data-active:bg-sidebar-primary data-active:text-sidebar-primary-foreground data-open:hover:bg-sidebar-accent data-open:hover:text-sidebar-accent-foreground gap-2 rounded-md p-2 text-left text-sm transition-[width,height,padding] group-has-data-[sidebar=menu-action]/menu-item:pr-8 group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! focus-visible:ring-2 data-active:font-medium peer/menu-button flex w-full items-center overflow-hidden outline-hidden group/menu-button disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&_svg]:size-4 [&_svg]:shrink-0',
  // ... rest unchanged
)
```

This changes the active state from `sidebar-accent` (slate-800) to `sidebar-primary` (blue-600), making active nav items have a prominent blue background.
  </action>
  <verify>Run `pnpm typecheck` - should pass</verify>
  <done>SidebarMenuButton uses data-active:bg-sidebar-primary for active state</done>
</task>

<task type="auto">
  <name>Task 2: Verify Nav Item Styling in AppSidebar</name>
  <files>apps/coach-web/src/components/layout/app-sidebar.tsx</files>
  <action>
Verify the nav items in AppSidebar correctly use the isActive prop and remove any redundant active styling classes.

**Check the SidebarMenuButton usage:**
The current code has:
```tsx
<SidebarMenuButton
  render={
    <Link
      to={to}
      className="[&.active]:bg-sidebar-accent [&.active]:text-sidebar-accent-foreground"
    />
  }
  isActive={Boolean(isActive)}
>
```

**Remove the redundant className from Link:**
The `isActive` prop on SidebarMenuButton already handles active styling via `data-active` attribute. The `[&.active]:` classes are TanStack Router's active class which may conflict.

**Update to:**
```tsx
<SidebarMenuButton
  render={<Link to={to} />}
  isActive={Boolean(isActive)}
>
```

This ensures the active state is controlled entirely by the `isActive` prop and the CSS we just updated, avoiding any style conflicts.

Also verify:
- All nav items use the `isActive` prop correctly
- Settings nav items also use `isActive` for consistency
  </action>
  <verify>
1. Run `pnpm typecheck` - should pass
2. Start dev server and verify:
   - Active nav item (e.g., Dashboard) has blue-600 background
   - Inactive items have slate-800 background on hover
   - Active item text is white
  </verify>
  <done>Nav items use isActive prop without conflicting className styles</done>
</task>

<task type="auto">
  <name>Task 3: Add Nav Item Hover and Focus Polish</name>
  <files>apps/coach-web/src/components/layout/app-sidebar.tsx</files>
  <action>
Ensure nav items have proper transition and focus states:

1. **Add consistent nav item styling:**
   The SidebarMenuButton already has hover transitions in the CVA definition, but verify the nav items look correct:
   - Inactive: text-muted-foreground (slate-500)
   - Hover: bg-sidebar-accent (slate-800) + text-sidebar-accent-foreground (white)
   - Active: bg-sidebar-primary (blue-600) + text-sidebar-primary-foreground (white)

2. **Update inactive nav item text color:**
   If nav items don't show slate-400/500 text by default, add a className to SidebarMenuButton:
   ```tsx
   <SidebarMenuButton
     render={<Link to={to} />}
     isActive={Boolean(isActive)}
     className="text-muted-foreground data-active:text-sidebar-primary-foreground"
   >
   ```

3. **Verify icon styling:**
   Icons should match text color. The `[&_svg]:shrink-0` class is already on the button.
   Icons will inherit text color.

Test visually:
- Inactive items: gray text, icons gray
- Hover: white text, lighter background
- Active: white text, blue background
  </action>
  <verify>
1. Run `pnpm typecheck` - should pass
2. Visual verification:
   - Dashboard (active) has solid blue background
   - Other items have gray text
   - Hover shows slate-800 background with white text
  </verify>
  <done>Nav items have correct inactive, hover, and active states matching reference design</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. Active nav item styling:
   - Background: blue-600 (#2563eb)
   - Text: white
   - Font weight: medium
3. Inactive nav item styling:
   - Text: slate-500 muted gray
   - Hover: slate-800 background, white text
4. Transitions are smooth
</verification>

<success_criteria>
- Active nav items have blue-600 background (not gray)
- Inactive items have muted text that brightens on hover
- Active state is visually prominent and matches reference design
- No conflicting active classes from TanStack Router
</success_criteria>

<output>
After completion, create `.planning/phases/02.6-design-system/02.6-03-SUMMARY.md`
</output>
