---
phase: 02.6-design-system
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/coach-web/src/components/layout/app-sidebar.tsx
  - apps/coach-web/src/components/layout/app-header.tsx
  - apps/coach-web/src/components/layout/app-shell.tsx
autonomous: true

must_haves:
  truths:
    - "Sidebar has logo with brand icon and STRENLY/Treino text"
    - "Sidebar has Settings section with divider label"
    - "Sidebar has user profile footer with avatar, name, and menu trigger"
    - "Header has breadcrumb, search icon, notification icon, and primary CTA slot"
  artifacts:
    - path: "apps/coach-web/src/components/layout/app-sidebar.tsx"
      provides: "Sidebar with logo, nav sections, settings divider, user footer"
      contains: "SidebarFooter"
    - path: "apps/coach-web/src/components/layout/app-header.tsx"
      provides: "Header with breadcrumb, icons, and CTA slot"
      contains: "SearchIcon"
    - path: "apps/coach-web/src/components/layout/app-shell.tsx"
      provides: "App shell integrating sidebar and new header"
      contains: "AppHeader"
  key_links:
    - from: "apps/coach-web/src/components/layout/app-shell.tsx"
      to: "apps/coach-web/src/components/layout/app-header.tsx"
      via: "import and render"
      pattern: "import.*AppHeader"
---

<objective>
Update layout components to match the reference design structure.

Purpose: Transform sidebar and header to match the target design with proper visual hierarchy, navigation sections, and user profile placement.
Output: Updated AppSidebar with logo/footer, new AppHeader with breadcrumb/icons/CTA, updated AppShell integrating both.
</objective>

<execution_context>
@/Users/tomiardz/.claude/get-shit-done/workflows/execute-plan.md
@/Users/tomiardz/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02.6-design-system/02.6-RESEARCH.md
@docs/ux-ui/dashboard-look-and-feel.html
@apps/coach-web/src/components/layout/app-sidebar.tsx
@apps/coach-web/src/components/layout/app-shell.tsx
@apps/coach-web/src/components/layout/breadcrumbs.tsx
@apps/coach-web/src/components/layout/user-menu.tsx
@apps/coach-web/src/components/ui/sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update AppSidebar with Logo, Settings Section, and User Footer</name>
  <files>apps/coach-web/src/components/layout/app-sidebar.tsx</files>
  <action>
Refactor AppSidebar to match reference design structure:

1. **Header with logo:**
   - Add a logo icon (use ZapIcon from lucide-react) in a primary-colored square
   - Brand text "STRENLY" or "Treino" in bold

2. **Main navigation group:**
   - Keep existing nav items (Panel/Dashboard, Atletas/Athletes, Ejercicios/Exercises)
   - Add Programs link (FileTextIcon) and Templates link (CopyIcon)

3. **Settings section with divider:**
   - Add a SidebarGroup with SidebarGroupLabel "CONFIGURACION" (uppercase, small text)
   - Add Settings link (SettingsIcon) and Help Center link (HelpCircleIcon)

4. **User profile footer:**
   - Add SidebarFooter with border-top
   - Include user avatar, name, subscription tier
   - Add menu trigger icon (MoreVerticalIcon)
   - Receive user prop from parent and display info

**Structure:**
```tsx
<Sidebar collapsible="offExamples" className="border-r border-sidebar-border">
  <SidebarHeader className="h-16 border-b border-sidebar-border">
    {/* Logo: icon square + brand name */}
  </SidebarHeader>

  <SidebarContent>
    <SidebarGroup>
      <SidebarGroupContent>
        <SidebarMenu>
          {/* Main nav: Dashboard, Athletes, Programs, Exercises, Templates */}
        </SidebarMenu>
      </SidebarGroupContent>
    </SidebarGroup>

    <SidebarGroup>
      <SidebarGroupLabel className="text-[10px] font-bold uppercase tracking-widest text-muted-foreground px-4">
        Configuracion
      </SidebarGroupLabel>
      <SidebarGroupContent>
        <SidebarMenu>
          {/* Settings, Help Center */}
        </SidebarMenu>
      </SidebarGroupContent>
    </SidebarGroup>
  </SidebarContent>

  <SidebarFooter className="border-t border-sidebar-border p-4">
    {/* User profile: avatar, name, tier, menu icon */}
  </SidebarFooter>
</Sidebar>
```

**Nav items arrays:**
```typescript
const mainNavItems = [
  { path: 'dashboard', label: 'Panel', icon: LayoutDashboardIcon },
  { path: 'athletes', label: 'Atletas', icon: UsersIcon },
  { path: 'programs', label: 'Programas', icon: FileTextIcon },
  { path: 'exercises', label: 'Ejercicios', icon: DumbbellIcon },
  { path: 'templates', label: 'Plantillas', icon: CopyIcon },
]

const settingsNavItems = [
  { path: 'settings', label: 'Configuracion', icon: SettingsIcon },
  { path: 'help', label: 'Centro de Ayuda', icon: HelpCircleIcon },
]
```

**Props:** Add user prop to receive user info from AppShell:
```typescript
type AppSidebarProps = {
  user: {
    name: string
    email: string
  }
}
```
  </action>
  <verify>Run `pnpm typecheck` - check for type errors</verify>
  <done>AppSidebar has logo header, main nav group, settings group with label, and user profile footer</done>
</task>

<task type="auto">
  <name>Task 2: Create AppHeader Component with Breadcrumb and Actions</name>
  <files>apps/coach-web/src/components/layout/app-header.tsx</files>
  <action>
Create a new AppHeader component matching the reference design:

1. **Structure:**
   - Sticky header at top with h-16 height
   - Background with backdrop blur (bg-background/80 backdrop-blur-md)
   - Border bottom (border-b border-border)

2. **Left side:**
   - SidebarTrigger button (for mobile)
   - Separator
   - Breadcrumbs component

3. **Right side:**
   - Search icon button (ghost variant)
   - Notification icon button (ghost variant)
   - Separator (vertical divider)
   - Primary action slot (optional - render if provided)

**Component:**
```tsx
import { BellIcon, SearchIcon } from 'lucide-react'
import { Button } from '@/components/ui/button'
import { Separator } from '@/components/ui/separator'
import { SidebarTrigger } from '@/components/ui/sidebar'
import { Breadcrumbs } from './breadcrumbs'

type AppHeaderProps = {
  primaryAction?: {
    label: string
    icon?: React.ReactNode
    onClick: () => void
  }
}

export function AppHeader({ primaryAction }: AppHeaderProps) {
  return (
    <header className="sticky top-0 z-40 flex h-16 shrink-0 items-center justify-between border-b border-border bg-background/80 px-4 backdrop-blur-md md:px-8">
      <div className="flex items-center gap-2">
        <SidebarTrigger className="md:hidden" />
        <Separator orientation="vertical" className="h-6 md:hidden" />
        <Breadcrumbs />
      </div>

      <div className="flex items-center gap-2">
        <Button variant="ghost" size="icon" className="text-muted-foreground hover:text-foreground">
          <SearchIcon className="size-5" />
          <span className="sr-only">Buscar</span>
        </Button>
        <Button variant="ghost" size="icon" className="text-muted-foreground hover:text-foreground">
          <BellIcon className="size-5" />
          <span className="sr-only">Notificaciones</span>
        </Button>

        {primaryAction && (
          <>
            <Separator orientation="vertical" className="mx-2 h-6" />
            <Button onClick={primaryAction.onClick}>
              {primaryAction.icon}
              {primaryAction.label}
            </Button>
          </>
        )}
      </div>
    </header>
  )
}
```
  </action>
  <verify>Run `pnpm typecheck` - check for type errors</verify>
  <done>AppHeader component exists with breadcrumb, search/notification icons, and optional primary action slot</done>
</task>

<task type="auto">
  <name>Task 3: Update AppShell to Use New Header Layout</name>
  <files>apps/coach-web/src/components/layout/app-shell.tsx</files>
  <action>
Update AppShell to:
1. Import and use new AppHeader instead of inline header
2. Pass user prop to AppSidebar
3. Remove UserMenu from header (now in sidebar footer)
4. Accept optional primaryAction prop to pass to header

**Updated component:**
```tsx
import { AppHeader } from './app-header'
import { AppSidebar } from './app-sidebar'
import { SidebarInset, SidebarProvider } from '@/components/ui/sidebar'

type AppShellProps = {
  children: React.ReactNode
  authData: {
    user: {
      id: string
      name: string
      email: string
    }
    session: {
      id: string
    }
  }
  primaryAction?: {
    label: string
    icon?: React.ReactNode
    onClick: () => void
  }
}

export function AppShell({ children, authData, primaryAction }: AppShellProps) {
  return (
    <SidebarProvider>
      <AppSidebar user={authData.user} />
      <SidebarInset>
        <AppHeader primaryAction={primaryAction} />
        <main className="flex flex-1 flex-col p-4 md:p-8">{children}</main>
      </SidebarInset>
    </SidebarProvider>
  )
}
```

Note: UserMenu is removed from header - it's now in the sidebar footer.
  </action>
  <verify>
1. Run `pnpm typecheck` - should pass
2. Start dev server and verify:
   - Sidebar shows logo, nav items, settings section, user footer
   - Header shows breadcrumb, search/notification icons
   - Layout renders correctly
  </verify>
  <done>AppShell uses AppHeader, passes user to AppSidebar, and accepts optional primaryAction</done>
</task>

</tasks>

<verification>
1. `pnpm typecheck` passes
2. Sidebar displays:
   - Logo with icon + "Treino" brand
   - Main nav items (Dashboard, Athletes, Programs, Exercises, Templates)
   - Settings section with label divider
   - User profile footer
3. Header displays:
   - Breadcrumb navigation
   - Search and notification icons
   - Primary action button (when provided)
</verification>

<success_criteria>
- Sidebar has 3 sections: header (logo), content (nav + settings), footer (user)
- Header has breadcrumb on left, icons + CTA on right
- AppShell integrates both components correctly
- Layout matches reference design structure
</success_criteria>

<output>
After completion, create `.planning/phases/02.6-design-system/02.6-02-SUMMARY.md`
</output>
