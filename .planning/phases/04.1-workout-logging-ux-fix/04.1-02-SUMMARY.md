---
phase: "04.1"
plan: "02"
subsystem: workout-logging-ui
tags: [react, ui-redesign, logging, supersets]
requires: ["04.1-01"]
provides: ["compact-logging-grid", "prescription-display", "context-header", "superset-visualization"]
affects: ["04-10"]
tech-stack:
  added: []
  patterns:
    - exercise-grouping-by-label
    - prescription-snapshot
    - context-denormalization
key-files:
  created:
    - apps/coach-web/src/features/workout-logs/components/series-row.tsx
    - apps/coach-web/src/features/workout-logs/components/exercise-group-section.tsx
    - apps/coach-web/src/features/workout-logs/components/logging-grid.tsx
  modified:
    - apps/coach-web/src/features/workout-logs/views/session-logging-view.tsx
    - packages/core/src/domain/entities/workout-log/types.ts
    - packages/contracts/src/workout-logs/workout-log.ts
    - packages/backend/src/use-cases/workout-logs/create-log.ts
    - packages/database/src/schema/logged-exercises.ts
    - packages/database/src/schema/workout-logs.ts
decisions:
  - id: prescription-snapshot
    title: "Full prescription snapshot in LoggedSeries"
    rationale: "Store all prescription fields (repsMax, isAmrap, intensity, tempo, rest) for complete deviation display"
  - id: group-display-info
    title: "Store groupLabel and groupOrder in LoggedExercise"
    rationale: "Enable superset visualization without requiring program lookup"
  - id: context-denormalization
    title: "Store programName, weekName, sessionName, athleteName in WorkoutLog"
    rationale: "Enable context display in header without additional queries"
metrics:
  duration: "15 min"
  completed: "2026-01-28"
---

# Phase 4.1 Plan 02: Complete UI Redesign Summary

Complete overhaul of session logging view with compact grid layout, prescription column, and superset visualization.

## Objective Achieved

Redesigned the workout logging UI from bulky cards to a compact, information-dense grid layout that shows prescription details inline and visualizes exercise groups (supersets/circuits) with A1/A2/B1 labels.

## Completed Tasks

| # | Task | Commit | Key Files |
|---|------|--------|-----------|
| 1 | Expand LoggedSeries schema | 0d66335 | types.ts, workout-log.ts, logged-exercises.ts |
| 2 | Update create-log use case | 94bf7e0 | create-log.ts |
| 3 | Create SeriesRow component | c333eef | series-row.tsx |
| 4 | Create ExerciseGroupSection | deecaad | exercise-group-section.tsx |
| 5 | Create LoggingGrid container | 0dfdf94 | logging-grid.tsx |
| 6+7 | Redesign view + add context | c392f42 | session-logging-view.tsx, types.ts, workout-log.ts |
| 8 | Cleanup old components | 4b43be0 | -logged-exercise-card.tsx, -logged-series-input.tsx |

## Technical Implementation

### New Schema Fields

**LoggedSeries extended with:**
- `prescribedRepsMax` - For rep ranges like "8-10"
- `prescribedIsAmrap` - AMRAP indicator
- `prescribedIntensityType` - absolute/percentage/rpe/rir
- `prescribedIntensityValue` - The intensity value
- `prescribedTempo` - "3010" format
- `prescribedRestSeconds` - Rest period

**LoggedExercise extended with:**
- `groupLabel` - "A", "B", "C"... for superset grouping
- `groupOrder` - Position within group (1, 2, 3...)

**WorkoutLog extended with context:**
- `programName`, `weekName`, `sessionName`, `athleteName`

### New Components

1. **SeriesRow** - Compact ~32px row with prescription column showing "8 x 100kg @RPE7", amber highlight on deviations
2. **ExerciseGroupSection** - Groups exercises with left border for supersets, A1/A2 labels
3. **LoggingGrid** - Container that groups exercises by label

### Prescription Display Format

- Single reps: `8 x 100kg`
- Rep range: `8-10 x 100kg`
- AMRAP: `AMRAP x 60kg`
- With intensity: `8 x 100kg @RPE7` or `8 x 100kg @RIR2` or `8 x 100kg @85%`

### Context Header

New header shows full context:
- Primary: `[Session Name] - [Athlete Name]`
- Secondary: `[Program Name] / [Week Name] | [Date]`

## Deviations from Plan

None - plan executed exactly as written.

## Verification

- [x] Typecheck passes
- [x] All 234 core tests pass
- [x] Database schema pushed successfully
- [x] Lint runs (pre-existing warnings not blocking)

## Files Changed Summary

- **Created:** 3 new components
- **Modified:** 9 files (types, contracts, use cases, repository, procedures, view)
- **Deleted:** 2 old components

## Next Phase Readiness

Ready for Phase 4 Plan 10 (History View). The prescription snapshot data and context fields will also be useful for displaying workout history with full context.
